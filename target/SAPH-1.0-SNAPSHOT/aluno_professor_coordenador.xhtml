<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition id="uiAlunoProfessorCoordenador">
        <h:panelGroup id="pnlUserInfo">
            <h:outputText value="Alunos, Professores e Coordenadores" styleClass="tituloSecao"/>
            <p:panelGrid style="width: 100%" styleClass="gridSemBorda">
                <p:row>
                    <p:column colspan="2">
                        <p:panelGrid style="width: 100%" styleClass="gridSemBorda">
                            <p:row>
                                <p:column style="width: 30%;">
                                    <h:outputText value="Nome" styleClass="labelTxt"/>
                                    <p:inputText style="width: 100%" value="#{usuarioMB.user.name}"/>
                                    <h:outputText value="Sobrenome" styleClass="labelTxt"/>
                                    <p:inputText style="width: 100%" value="#{usuarioMB.user.surname}"/>    
                                </p:column>
                                <p:column style="width: 20%">

                                    <h:outputText value="Tipo de Usuário" styleClass="labelTxt" style="padding-left: 15px;"/>
                                    <p:pickList addAllLabel="Adicionar Todas" addLabel="Adicione" moveBottomLabel="Último" 
                                                moveTopLabel="Primeiro" moveDownLabel="Descer" moveUpLabel="Subir" styleClass="pickPequeno"
                                                removeAllLabel="Remover Todas" value="#{usuarioMB.dualListModel}" style="width: 100%;"
                                                var="teste" itemLabel="#{teste}" itemValue="#{teste}" converter="roleConverter">
                                        <p:ajax event="transfer" listener="#{usuarioMB.onTransfer}" update="raRf"/>
                                    </p:pickList>
                                </p:column>
                                <p:column style="width: 20%">
                                    <h:panelGroup id="raRf">
                                        <h:outputText value="Registro Funcional" styleClass="labelTxt" rendered="#{usuarioMB.isShowRF()}"/>
                                        <p:inputText style="width: 48%" value="#{usuarioMB.user.rf}" rendered="#{usuarioMB.isShowRF()}"/>
                                        <h:outputText value="Registro Aluno" styleClass="labelTxt" rendered="#{usuarioMB.isShowRA()}"/>
                                        <p:inputText style="width: 48%" value="#{usuarioMB.user.ra}" rendered="#{usuarioMB.isShowRA()}"/>
                                    </h:panelGroup>
                                </p:column>
                                <p:column/>
                            </p:row>
                        </p:panelGrid>
                    </p:column>

                </p:row>
                <p:row>
                    <p:column style="width: 50%;">               
                        <h:panelGroup id="edicaoTelefone">
                            <p:panelGrid id="gridTelefone" style="width: 100%" styleClass="gridSemBorda">

                                <p:row>
                                    <p:column style="width: 30%">
                                        <h:outputText value="Tipo de telefone" styleClass="labelTxt"/>
                                        <p:selectOneRadio value="#{usuarioMB.phoneAux.phoneType}">
                                            <f:selectItems value="#{usuarioMB.phoneTypes}" var="type" itemLabel="#{type}" itemValue="#{type}"/>
                                            <p:ajax update="mskTelefone" listener="#{usuarioMB.clearPhoneNumbers()}"/>
                                        </p:selectOneRadio>
                                        <h:outputText value="Telefone" styleClass="labelTxt"/>
                                        <p:inputMask id="mskDDD" mask="99" size="3" value="#{usuarioMB.phoneAux.code}">
                                            <p:ajax/>
                                            <p:watermark value="DDD" for="mskDDD"/>
                                        </p:inputMask>
                                        <p:inputMask id="mskTelefone" mask="#{usuarioMB.phoneMask}" value="#{usuarioMB.phoneAux.number}" size="15">
                                            <p:ajax/>
                                            <p:watermark value="Telefone" for="mskTelefone"/>
                                        </p:inputMask>
                                        <p:commandButton update="phoneList, mskTelefone, mskDDD" value="Adicionar" actionListener="#{usuarioMB.addPhone()}"/>
                                    </p:column>
                                    <p:column>
                                        <h:outputText value="Telefones Cadastrados" styleClass="labelTxt"/>
                                        <p:dataTable style="width: 100%;" paginator="true" paginatorPosition="bottom" rows="5" tableStyle="height: 140px"
                                                     paginatorAlwaysVisible="false" emptyMessage="Nenhum Telefone Cadastrado" value="#{usuarioMB.user.phones}"
                                                     var="tel" id="phoneList">

                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="DDD"/>
                                                </f:facet>
                                                <h:outputText value="#{tel.code}"/>
                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Número"/>
                                                </f:facet>
                                                <h:outputText value="#{tel.number}"/>
                                            </p:column>
                                            <p:column style="width: 20%; text-align: center">
                                                <f:facet name="header">
                                                    <h:outputText value="Apagar"/>
                                                </f:facet>
                                                <p:commandButton update="phoneList" value="Apagar" actionListener="#{usuarioMB.removePhone(tel)}"/>

                                            </p:column>

                                        </p:dataTable>
                                    </p:column>  

                                </p:row>
                            </p:panelGrid>
                        </h:panelGroup>
                    </p:column>
                    <p:column>
                        <p:panelGrid style="width: 100%" styleClass="gridSemBorda">
                            <p:row>
                                <p:column style="width: 30%" styleClass="">
                                    <h:outputText value="Email:" styleClass="labelTxt"/>
                                    <p:inputText id="txtEmail"  style="width: 60%" value="#{usuarioMB.emailAux}"/>
                                    <p:commandButton value="Adicionar" update="txtEmail, emailList" actionListener="#{usuarioMB.addEmail()}"/>
                                </p:column>
                                <p:column rowspan="2">
                                    <h:outputText value="Emails Cadastrados" styleClass="labelTxt"/>
                                    <p:dataTable style="width: 100%;" paginator="true" paginatorPosition="bottom" rows="5" tableStyle="height: 140px"
                                                 paginatorAlwaysVisible="false" emptyMessage="Nenhum Email Cadastrado" value="#{usuarioMB.user.emails}"
                                                 var="email" id="emailList">

                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Email"/>
                                            </f:facet>
                                            #{email}
                                        </p:column>
                                        <p:column style="width: 20%; text-align: center">
                                            <f:facet name="header">
                                                <h:outputText value="Apagar"/>
                                            </f:facet>
                                            <p:commandButton update="emailList" value="Apagar" actionListener="#{usuarioMB.removeEmail(email)}"/>

                                        </p:column>

                                    </p:dataTable>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column>
                        <p:commandButton value="Salvar Usuário" update="pnlRolesLists, pnlUserInfo" actionListener="#{usuarioMB.saveUser()}"/>
                        <p:commandButton value="Cancelar" update="formPrincipal:pnlCentral"/>
                    </p:column>
                </p:row>
            </p:panelGrid>
        </h:panelGroup>
        <p:separator/>
        <h:panelGroup id="pnlRolesLists">
            <p:tabView style="width: 100%">
                <p:tab title="Alunos Cadastrados">
                    <p:dataTable style="width: 100%;" paginator="true" paginatorPosition="bottom" rows="10" tableStyle="height: 250px"
                                 paginatorAlwaysVisible="false" emptyMessage="Nenhum Aluno Cadastrado" value="#{usuarioMB.allStudents}"
                                 var="student">
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Nome"/>
                            </f:facet>
                            #{student.name}
                        </p:column>

                    </p:dataTable>
                </p:tab>
                <p:tab title="Professores Cadastrados">
                    <p:dataTable style="width: 100%;" paginator="true" paginatorPosition="bottom" rows="10" tableStyle="height: 250px"
                                 paginatorAlwaysVisible="false" emptyMessage="Nenhum Professor Cadastrado" value="#{usuarioMB.allTeachers}"
                                 var="teacher">
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Nome"/>
                            </f:facet>
                            #{teacher.name}
                        </p:column>

                    </p:dataTable>
                </p:tab>
                <p:tab title="Coordenadores Cadastrados">
                    <p:dataTable style="width: 100%;" paginator="true" paginatorPosition="bottom" rows="10" tableStyle="height: 250px"
                                 paginatorAlwaysVisible="false" emptyMessage="Nenhum Coordenador Cadastrado" value="#{usuarioMB.allCoordinators}"
                                 var="coordinator">
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Nome"/>
                            </f:facet>
                            #{coordinator.name}
                        </p:column>

                    </p:dataTable>
                </p:tab>
            </p:tabView>
        </h:panelGroup>
    </ui:composition>
</html>
